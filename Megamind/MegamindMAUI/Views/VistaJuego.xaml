<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MegamindMAUI.Views.VistaJuego"
             xmlns:vmodel="clr-namespace:MegamindMAUI.VM"
             Title="VistaJuego"
             BackgroundColor="#e2b383">
    <ContentPage.BindingContext>
        <vmodel:VMJuego/>
    </ContentPage.BindingContext>

    <Grid RowSpacing="10" Padding="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="100"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="200"/>
        </Grid.RowDefinitions>
        <!--Fila con la combinacion para ganar-->
        <CollectionView
                Grid.Row="0"
                MaximumHeightRequest="100"
                BackgroundColor="Blue"
                 ItemsSource="{Binding Combinacion}"
                HorizontalOptions="Center"
                >
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="10" VerticalItemSpacing="0"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <HorizontalStackLayout>
                        <Image Source="{Binding FichaColor}" MaximumHeightRequest="75"/>
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
        
        <!--Fila para las fichas en juego-->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <CollectionView Grid.Row="0"
                BackgroundColor="#b98d66" 
                VerticalOptions="CenterAndExpand"
                HeightRequest="150"
                
                ItemsSource="{Binding FilasJuego[0].Juego}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Image Source="{Binding FichaColor}" 
                                   MaximumHeightRequest="30"
                                   Margin="10,0,0,0"></Image>
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <CollectionView Grid.Row="1"
                 BackgroundColor="#b98d66" 
                 VerticalOptions="CenterAndExpand"
                 HeightRequest="150"
                 ItemsSource="{Binding FilasJuego[1].Juego}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Image Source="{Binding FichaColor}" 
                        MaximumHeightRequest="30"
                        Margin="10,0,0,0"></Image>
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <CollectionView Grid.Row="2"
     BackgroundColor="#b98d66" 
     VerticalOptions="CenterAndExpand"
     HeightRequest="150"
     ItemsSource="{Binding FilasJuego[1].Juego}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Image Source="{Binding FichaColor}" 
            MaximumHeightRequest="30"
            Margin="10,0,0,0"></Image>
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <CollectionView Grid.Row="3"
     BackgroundColor="#b98d66" 
     VerticalOptions="CenterAndExpand"
     HeightRequest="150"
     ItemsSource="{Binding FilasJuego[1].Juego}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Image Source="{Binding FichaColor}" 
            MaximumHeightRequest="30"
            Margin="10,0,0,0"></Image>
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <CollectionView Grid.Row="4"
                 BackgroundColor="#b98d66" 
                 VerticalOptions="CenterAndExpand"
                 HeightRequest="150"
                 ItemsSource="{Binding FilasJuego[1].Juego}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Image Source="{Binding FichaColor}" 
                                MaximumHeightRequest="30"
                                Margin="10,0,0,0"></Image>          
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <CollectionView Grid.Row="5"
                 BackgroundColor="#b98d66" 
                 VerticalOptions="CenterAndExpand"
                 HeightRequest="150"
                 ItemsSource="{Binding FilasJuego[1].Juego}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Image Source="{Binding FichaColor}" 
                                MaximumHeightRequest="30"
                                Margin="10,0,0,0"></Image>
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </Grid>

        <CollectionView Grid.Row="6"
                 BackgroundColor="#b98d66" 
                 VerticalOptions="CenterAndExpand"
                 HeightRequest="150"
                 ItemsSource="{Binding FilasJuego[1].Juego}">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <HorizontalStackLayout>
                        <Image Source="{Binding FichaColor}" 
            MaximumHeightRequest="30"
            Margin="10,0,0,0"></Image>
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <CollectionView Grid.Row="7"
                 BackgroundColor="#b98d66" 
                 VerticalOptions="CenterAndExpand"
                 HeightRequest="150"
                 ItemsSource="{Binding FilasJuego[1].Juego}">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <HorizontalStackLayout>
                        <Image Source="{Binding FichaColor}" 
            MaximumHeightRequest="30"
            Margin="10,0,0,0"></Image>
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <CollectionView Grid.Row="8"
             BackgroundColor="#b98d66" 
             VerticalOptions="CenterAndExpand"
             HeightRequest="150"
             ItemsSource="{Binding FilasJuego[1].Juego}">   
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <HorizontalStackLayout>
                        <Image Source="{Binding FichaColor}" 
                            MaximumHeightRequest="30"
                            Margin="10,0,0,0"></Image>
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <CollectionView Grid.Row="9"
             BackgroundColor="#b98d66" 
             VerticalOptions="CenterAndExpand"
             HeightRequest="150"
             ItemsSource="{Binding FilasJuego[1].Juego}">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Horizontal" Span="1" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <HorizontalStackLayout>
                        <Image Source="{Binding FichaColor}" 
                            MaximumHeightRequest="30"
                            Margin="10,0,0,0"></Image>
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!--Contenedor con las fichas posibles para jugar-->
        <StackLayout Grid.Row="2" BackgroundColor="Green" VerticalOptions="FillAndExpand">
            <CollectionView BackgroundColor="#b98d66" 
                    VerticalOptions="FillAndExpand"
                        HeightRequest="150"
                        WidthRequest="500"
                        ItemsSource="{Binding Tablero}">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical" Span="4" HorizontalItemSpacing="0" VerticalItemSpacing="10"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <HorizontalStackLayout HorizontalOptions="Center">
                        <Image Source="{Binding FichaColor}" HeightRequest="50"/>
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
        </StackLayout>

    </Grid>

   
    
    
    
</ContentPage>